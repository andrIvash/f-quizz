webpackJsonp([0],{13:function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e){var a=n(9),t=(n.n(a),n(3)),o=n(1),i=n(2),r=n(11),s=n(10),u=n.n(s),l=(n(7),n(14)),d=(n(6),n(5),n(4),{ru:{messages:{confirmed:function(){return"Your password is not confirmed"},email:function(){return"I really dont like your email"},required:function(){return"Это обязательное поле"},numeric:function(){return"Введите цифровое значение"},alpha_dash:function(){return"Введите  текстовое значение"},alpha_spaces:function(){return"Введите  текстовое значение"}}}});r.a.addLocale(u.a);var c={locale:"ru"};r.b.Validator.updateDictionary(d),Vue.use(r.b,c),Vue.config.debug=!0;new Vue({el:"#app-teacher",data:{eduShow:!1,user_type:null,user:null},components:{teacherComponent:l.a},mounted:function(){t.a.init(),void 0!==o.a.get("token")?(t.a.token=o.a.get("token"),this.startApp()):-1===document.location.search.indexOf("auth")&&i.a.auth()},methods:{startApp:function(){var a=this,n=this;t.a.getUserInfo().then(function(o){n.loading=!0;var i=t.a.getData().user.roles;n.user=o;var r=i.find(function(e){return"EduStaff"===e});a.clearView(),r?n.eduShow=!0:(e("#modal2 .modal__content").text("Активность возможна только для преподавателей !"),a.showModal())})},showModal:function(){e("#modal2").modal({fadeDuration:250,fadeDelay:1.5})},sendData:function(a){var n=this;console.log("send data"),e.ajax({url:"https://formspree.io/ebelopukhova@paninirus.com",method:"POST",data:{username:a.username,index:a.index,address:a.address,phone:a.phone,school_number:a.school_number,albums:a.albums,personal_data:a.personal_data},dataType:"json"}).done(function(){e("#modal2 .modal__content").text("Спасибо, ваша заявка принята."),n.showModal()})},clearView:function(){this.eduShow=!1},saveAllData:function(){var e=this,a=this;this.userList.forEach(function(a){a.id===e.user.personId&&(a.summ=e.info.summ)}),t.a.addKeyToDB({label:"raff",key:"raff_activity-"+this.user.personId,value:JSON.stringify(this.info),permissionLevel:"Public"},function(e){t.a.addKeyToDB({key:"raff_activity-articles-"+a.article.id,value:JSON.stringify(a.article),permissionLevel:"Public"},function(e){t.a.addKeyToDB({key:"raff_activity-userList",value:JSON.stringify(a.userList),permissionLevel:"Public"},function(e){})})})}}})}.call(a,n(0))},14:function(e,a,n){"use strict";(function(e){a.a={template:"#teacher-template",props:["isShown"],data:function(){return{address:"",username:"",index:null,phone:"",school_number:null,albums:150,personal_data:!1}},mounted:function(){var a=this;e(".tform__input").on("focus",function(){a.errors.clear()})},methods:{validateBeforeSubmit:function(){var a=this,n=this;this.$validator.validateAll().then(function(t){if(t)return void a.$emit("send",{username:n.username,index:n.index,address:n.address,phone:n.phone,school_number:n.school_number,albums:n.albums,personal_data:n.personal_data});e("#modal2 .modal__content").text("Форма содержит неверные данные !"),a.showModal()})},showModal:function(){e("#modal2").modal({fadeDuration:250,fadeDelay:1.5})},buyThis:function(){e("#modal").modal({fadeDuration:250,fadeDelay:1.5})}}}}).call(a,n(0))},16:function(e,a,n){e.exports=n(13)}},[16]);
//# sourceMappingURL=app2.bundle.js.map