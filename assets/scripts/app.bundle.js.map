{"version":3,"sources":["webpack:///assets/scripts/app.bundle.js","webpack:///./scripts/main.js"],"names":["webpackJsonp","12","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__node_modules_jquery_modal_jquery_modal_js__","__WEBPACK_IMPORTED_MODULE_1__api__","n","__WEBPACK_IMPORTED_MODULE_2__cookie__","__WEBPACK_IMPORTED_MODULE_3__auth__","__WEBPACK_IMPORTED_MODULE_4_vee_validate__","__WEBPACK_IMPORTED_MODULE_5_vee_validate_dist_locale_ru__","__WEBPACK_IMPORTED_MODULE_5_vee_validate_dist_locale_ru___default","__WEBPACK_IMPORTED_MODULE_6__components_start__","__WEBPACK_IMPORTED_MODULE_7__components_game__","__WEBPACK_IMPORTED_MODULE_8__components_foto__","__WEBPACK_IMPORTED_MODULE_9__components_final__","addLocale","a","configValidate","locale","Vue","use","config","debug","el","data","loading","startShow","gameShow","fotoShow","finalShow","user_type","game_status","game_result","foto_status","user","foto_url","user_list","components","startComponent","gameComponent","fotoComponent","finalComponent","mounted","init","get","token","this","startApp","document","location","search","indexOf","auth","methods","that","getUserInfo","then","res","roles","getData","isStudent","find","role","getKeyFromDB","key","JSON","parse","Value","updateData","startGame","clearView","getFoto","goBack","endGame","score","saveAllData","userId","findUser","push","id","personId","addKeyToDB","label","stringify","permissionLevel","saveFoto","uploadImage","console","log","checkUploadImage","downloadUrl","_this","result","forEach","item","i","15","exports"],"mappings":"AAAAA,cAAc,IAERC,GACA,SAAUC,EAAQC,EAAqBC,GAE7C,YACAC,QAAOC,eAAeH,EAAqB,cAAgBI,OAAO,GAC7C,IAAIC,GAA2EJ,EAAoB,GAE/FK,GADmFL,EAAoBM,EAAEF,GACpEJ,EAAoB,IACzDO,EAAwCP,EAAoB,GAC5DQ,EAAsCR,EAAoB,GAC1DS,EAA6CT,EAAoB,IACjEU,EAA4DV,EAAoB,IAChFW,EAAoEX,EAAoBM,EAAEI,GAC1FE,EAAkDZ,EAAoB,GACtEa,EAAiDb,EAAoB,GACrEc,EAAiDd,EAAoB,GACrEe,EAAkDf,EAAoB,ECH/FS,GAAA,EAAUO,UAAUL,EAAAM,EAGpB,IAAMC,IACJC,OAAQ,KAGVC,KAAIC,IAAIZ,EAAA,EAAaS,GACrBE,IAAIE,OAAOC,OAAQ,CAGN,IAAIH,MACfI,GAAI,aACJC,MACEC,SAAS,EACTC,WAAW,EACXC,UAAU,EACVC,UAAU,EACVC,WAAW,EACXC,UAAW,KACXC,aAAa,EACbC,YAAa,KACbC,aAAa,EACbC,KAAM,KACNC,SAAU,KACVC,cAGFC,YACEC,eAAgB3B,EAAA,EAChB4B,cAAe3B,EAAA,EACf4B,cAAe3B,EAAA,EACf4B,eAAgB3B,EAAA,GAGlB4B,QAAS,WAIPtC,EAAA,EAAIuC,WACA,KAAWrC,EAAA,EAAOsC,IAAI,UACxBxC,EAAA,EAAIyC,MAAQvC,EAAA,EAAOsC,IAAI,SACvBE,KAAKC,aACkD,IAA9CC,SAASC,SAASC,OAAOC,QAAQ,SAC1C5C,EAAA,EAAK6C,QAITC,SACEN,SADO,WAEL,GAAMO,GAAOR,IACb1C,GAAA,EAAImD,cAAcC,KAAK,SAACC,GACtBH,EAAK7B,SAAU,CACf,IAAMiC,GAAQtD,EAAA,EAAIuD,UAAUzB,KAAKwB,MAC3BE,EAAYF,EAAMG,KAAK,SAAAC,GAC3B,MAAgB,eAATA,GAKPR,GAAKxB,YAHF8B,EAKLN,EAAKpB,KAAOuB,IAEXD,KAAK,WAENpD,EAAA,EAAI2D,cAAcC,IAAK,0BAA2B,SAASP,GAE9C,MAAPA,EACFH,EAAKlB,cAGLkB,EAAKlB,UAAY6B,KAAKC,MAAMT,EAAIU,OAChCb,EAAKc,mBAKbC,UA9BO,WA+BLvB,KAAKwB,YACLxB,KAAKnB,UAAW,GAGlB4C,QAnCO,WAoCLzB,KAAKwB,YACLxB,KAAKlB,UAAW,GAGlB4C,OAxCO,WAyCL1B,KAAKwB,YACLxB,KAAKpB,WAAY,GAGnB+C,QA7CO,SA6CCC,GACN5B,KAAKd,YAAc0C,EACnB5B,KAAKwB,YACLxB,KAAKjB,WAAY,EAEZiB,KAAKf,cACRe,KAAKf,aAAc,EACnBe,KAAK6B,gBAITL,UAxDO,WAyDLxB,KAAKpB,WAAY,EACjBoB,KAAKnB,UAAW,EAChBmB,KAAKlB,UAAW,EAChBkB,KAAKjB,WAAY,GAGnBuC,WA/DO,WAiEL,GAAMQ,GAAS9B,KAAK+B,YACL,IAAXD,IACF9B,KAAKd,YAAcc,KAAKV,UAAUwC,GAAQ5C,YAC1Cc,KAAKf,YAAce,KAAKV,UAAUwC,GAAQ7C,YAC1Ce,KAAKb,YAAca,KAAKV,UAAUwC,GAAQ3C,cAI9C0C,YAzEO,WA0EL,GAAMrB,GAAOR,KACP8B,EAAS9B,KAAK+B,YACL,IAAXD,GACF9B,KAAKV,UAAUwC,GAAQ5C,YAAcc,KAAKd,YAC1Cc,KAAKV,UAAUwC,GAAQ7C,YAAce,KAAKf,YAC1Ce,KAAKV,UAAUwC,GAAQ3C,YAAca,KAAKb,aAE1Ca,KAAKV,UAAU0C,MACbC,GAAIzB,EAAKpB,KAAK8C,SACdhD,YAAac,KAAKd,YAClBD,YAAae,KAAKf,YAClBE,YAAaa,KAAKb,cAItB7B,EAAA,EAAI6E,YACFC,MAAO,WAEPlB,IAAK,yBACL9D,MAAO+D,KAAKkB,UAAU7B,EAAKlB,WAE3BgD,gBAAiB,UAChB,SAAS3B,OAId4B,SApGO,SAoGE7D,GACP,GAAM8B,GAAOR,IACb1C,GAAA,EAAIkF,YAAY9D,EAAM,SAACiC,GACrB8B,QAAQC,IAAI,YAAa/B,GACzBrD,EAAA,EAAIqF,kBAAkBhC,GAAM,SAACA,GAC3BH,EAAKrB,YAAcwB,EAAI,GAAGiC,YAC1BpC,EAAKqB,mBAKXE,SA/GO,WA+GI,GAAAc,GAAA7C,KACL8C,GAAS,CAMb,OALA9C,MAAKV,UAAUyD,QAAQ,SAACC,EAAMC,GACxBD,EAAKf,KAAOY,EAAKzD,KAAK8C,WACxBY,EAASG,KAGNH,ODsBPI,GACA,SAAUnG,EAAQoG,EAASlG,GAEjCF,EAAOoG,QAAUlG,EAAoB,OAKlC","file":"assets/scripts/app.bundle.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 12:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__node_modules_jquery_modal_jquery_modal_js__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__node_modules_jquery_modal_jquery_modal_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__node_modules_jquery_modal_jquery_modal_js__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__api__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cookie__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__auth__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vee_validate__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_vee_validate_dist_locale_ru__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_vee_validate_dist_locale_ru___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_vee_validate_dist_locale_ru__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__components_start__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__components_game__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__components_foto__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__components_final__ = __webpack_require__(4);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_4_vee_validate__[\"a\" /* Validator */].addLocale(__WEBPACK_IMPORTED_MODULE_5_vee_validate_dist_locale_ru___default.a);\n\nvar configValidate = {\n  locale: 'ru'\n};\n\nVue.use(__WEBPACK_IMPORTED_MODULE_4_vee_validate__[\"b\" /* default */], configValidate);\nVue.config.debug = true;\n\nvar _vms = new Vue({\n  el: '#app-start',\n  data: {\n    loading: false, // loader\n    startShow: true, // show start page\n    gameShow: false, // shop game page\n    fotoShow: false, // show foto page\n    finalShow: false, // show foto page\n    user_type: null, // user type\n    game_status: false, // play in game or not\n    game_result: null, //result of the game\n    foto_status: false, //foto load status\n    user: null,\n    foto_url: null,\n    user_list: []\n  },\n\n  components: {\n    startComponent: __WEBPACK_IMPORTED_MODULE_6__components_start__[\"a\" /* default */],\n    gameComponent: __WEBPACK_IMPORTED_MODULE_7__components_game__[\"a\" /* default */],\n    fotoComponent: __WEBPACK_IMPORTED_MODULE_8__components_foto__[\"a\" /* default */],\n    finalComponent: __WEBPACK_IMPORTED_MODULE_9__components_final__[\"a\" /* default */]\n  },\n\n  mounted: function mounted() {\n    //console.log('Running App version ! ' + CDN);\n    var that = this;\n\n    __WEBPACK_IMPORTED_MODULE_1__api__[\"a\" /* API */].init();\n    if (void 0 !== __WEBPACK_IMPORTED_MODULE_2__cookie__[\"a\" /* Cookie */].get('token')) {\n      __WEBPACK_IMPORTED_MODULE_1__api__[\"a\" /* API */].token = __WEBPACK_IMPORTED_MODULE_2__cookie__[\"a\" /* Cookie */].get('token');\n      this.startApp();\n    } else if (document.location.search.indexOf('auth') === -1) {\n      __WEBPACK_IMPORTED_MODULE_3__auth__[\"a\" /* Auth */].auth();\n    }\n  },\n  methods: {\n    startApp: function startApp() {\n      var that = this;\n      __WEBPACK_IMPORTED_MODULE_1__api__[\"a\" /* API */].getUserInfo().then(function (res) {\n        that.loading = true; // инициализация спиннера\n        var roles = __WEBPACK_IMPORTED_MODULE_1__api__[\"a\" /* API */].getData().user.roles;\n        var isStudent = roles.find(function (role) {\n          return role === 'EduStudent';\n        });\n        if (!isStudent) {\n          // проверка на студента\n          that.user_type = false;\n        } else {\n          that.user_type = true;\n        }\n        that.user = res;\n        //console.log(that.user); //EduStudent\n      }).then(function () {\n        //API.getKeyFromDB({key: `football_activity-${that.user.personId}`}, function(res) {\n        __WEBPACK_IMPORTED_MODULE_1__api__[\"a\" /* API */].getKeyFromDB({ key: 'football_activity-0001' }, function (res) {\n          //console.log(res);\n          if (res == null) {\n            // new user !!!!!!!!\n            that.user_list = [];\n          } else {\n            that.user_list = JSON.parse(res.Value);\n            that.updateData();\n          }\n        });\n      });\n    },\n    startGame: function startGame() {\n      this.clearView();\n      this.gameShow = true;\n    },\n    getFoto: function getFoto() {\n      this.clearView();\n      this.fotoShow = true;\n    },\n    goBack: function goBack() {\n      this.clearView();\n      this.startShow = true;\n    },\n    endGame: function endGame(score) {\n      this.game_result = score;\n      this.clearView();\n      this.finalShow = true;\n\n      if (!this.game_status) {\n        // save result to base\n        this.game_status = true;\n        this.saveAllData();\n      }\n    },\n    clearView: function clearView() {\n      // clear view screen\n      this.startShow = false;\n      this.gameShow = false;\n      this.fotoShow = false;\n      this.finalShow = false;\n    },\n    updateData: function updateData() {\n      // update user data\n\n      var userId = this.findUser();\n      if (userId !== false) {\n        this.game_result = this.user_list[userId].game_result;\n        this.game_status = this.user_list[userId].game_status;\n        this.foto_status = this.user_list[userId].foto_status;\n      }\n    },\n    saveAllData: function saveAllData() {\n      // renew user info\n      var that = this;\n      var userId = this.findUser();\n      if (userId !== false) {\n        this.user_list[userId].game_result = this.game_result;\n        this.user_list[userId].game_status = this.game_status;\n        this.user_list[userId].foto_status = this.foto_status;\n      } else {\n        this.user_list.push({\n          id: that.user.personId,\n          game_result: this.game_result,\n          game_status: this.game_status,\n          foto_status: this.foto_status\n        });\n      }\n\n      __WEBPACK_IMPORTED_MODULE_1__api__[\"a\" /* API */].addKeyToDB({\n        label: 'football',\n        // key: `football_activity-${that.user.personId}`,\n        key: 'football_activity-0001',\n        value: JSON.stringify(that.user_list),\n        //value: JSON.stringify([]),\n        permissionLevel: 'Public'\n      }, function (res) {});\n    },\n    saveFoto: function saveFoto(data) {\n      // save foto to base and renew user info\n      var that = this;\n      __WEBPACK_IMPORTED_MODULE_1__api__[\"a\" /* API */].uploadImage(data, function (res) {\n        console.log('save file', res);\n        __WEBPACK_IMPORTED_MODULE_1__api__[\"a\" /* API */].checkUploadImage([res], function (res) {\n          that.foto_status = res[0].downloadUrl;\n          that.saveAllData();\n        });\n      });\n    },\n    findUser: function findUser() {\n      var _this = this;\n\n      //find active user in user_list\n      var result = false;\n      this.user_list.forEach(function (item, i) {\n        if (item.id === _this.user.personId) {\n          result = i;\n        }\n      });\n      return result;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 15:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(12);\n\n\n/***/ })\n\n},[15]);\n\n\n// WEBPACK FOOTER //\n// assets/scripts/app.bundle.js","\nimport '../../node_modules/jquery-modal/jquery.modal.js';\nimport { API } from './api';\nimport { Cookie } from './cookie';\nimport { Auth } from './auth';\n\n\nimport VeeValidate, { Validator } from 'vee-validate';\nimport ru from 'vee-validate/dist/locale/ru';\n\nimport StartComponent from './components/start';\nimport GameComponent from './components/game';\nimport FotoComponent from './components/foto';\nimport FinalComponent from './components/final';\n\nValidator.addLocale(ru);\n\n\nconst configValidate = {\n  locale: 'ru'\n};\n\nVue.use(VeeValidate, configValidate);\nVue.config.debug = true;\n\n\nconst _vms = new Vue({\n  el: '#app-start',\n  data: {\n    loading: false, // loader\n    startShow: true, // show start page\n    gameShow: false, // shop game page\n    fotoShow: false, // show foto page\n    finalShow: false, // show foto page\n    user_type: null, // user type\n    game_status: false, // play in game or not\n    game_result: null, //result of the game\n    foto_status: false, //foto load status\n    user: null,\n    foto_url: null,\n    user_list: []\n  },\n\n  components: {\n    startComponent: StartComponent,\n    gameComponent: GameComponent,\n    fotoComponent: FotoComponent,\n    finalComponent: FinalComponent\n  },\n\n  mounted: function() {\n    //console.log('Running App version ! ' + CDN);\n    const that = this;\n\n    API.init();\n    if (void 0 !== Cookie.get('token')) {\n      API.token = Cookie.get('token');\n      this.startApp();\n    } else if (document.location.search.indexOf('auth') === -1) {\n      Auth.auth();\n    }\n\n  },\n  methods: {\n    startApp() {\n      const that = this;\n      API.getUserInfo().then((res) => {\n        that.loading = true; // инициализация спиннера\n        const roles = API.getData().user.roles;\n        const isStudent = roles.find(role => {\n          return role === 'EduStudent';\n        });\n        if (!isStudent) { // проверка на студента\n          that.user_type = false;\n        } else {\n          that.user_type = true;\n        }\n        that.user = res;\n        //console.log(that.user); //EduStudent\n      }).then(function() {\n        //API.getKeyFromDB({key: `football_activity-${that.user.personId}`}, function(res) {\n        API.getKeyFromDB({key: 'football_activity-0001'}, function(res) {\n        //console.log(res);\n          if (res == null) { // new user !!!!!!!!\n            that.user_list = [];\n          }\n          else {\n            that.user_list = JSON.parse(res.Value);\n            that.updateData();\n          }\n        });\n      });\n    },\n    startGame() {\n      this.clearView();\n      this.gameShow = true;\n    },\n\n    getFoto() {\n      this.clearView();\n      this.fotoShow = true;\n    },\n\n    goBack() {\n      this.clearView();\n      this.startShow = true;\n    },\n\n    endGame(score) {\n      this.game_result = score;\n      this.clearView();\n      this.finalShow = true;\n\n      if (!this.game_status) { // save result to base\n        this.game_status = true;\n        this.saveAllData();\n      }\n    },\n\n    clearView() { // clear view screen\n      this.startShow = false;\n      this.gameShow = false;\n      this.fotoShow = false;\n      this.finalShow = false;\n    },\n\n    updateData() { // update user data\n\n      const userId = this.findUser();\n      if (userId !== false) {\n        this.game_result = this.user_list[userId].game_result;\n        this.game_status = this.user_list[userId].game_status;\n        this.foto_status = this.user_list[userId].foto_status;\n      }\n    },\n\n    saveAllData() { // renew user info\n      const that = this;\n      const userId = this.findUser();\n      if (userId !== false) {\n        this.user_list[userId].game_result = this.game_result;\n        this.user_list[userId].game_status = this.game_status;\n        this.user_list[userId].foto_status = this.foto_status;\n      } else {\n        this.user_list.push({\n          id: that.user.personId,\n          game_result: this.game_result,\n          game_status: this.game_status,\n          foto_status: this.foto_status\n        });\n      }\n\n      API.addKeyToDB({\n        label: 'football',\n        // key: `football_activity-${that.user.personId}`,\n        key: 'football_activity-0001',\n        value: JSON.stringify(that.user_list),\n        //value: JSON.stringify([]),\n        permissionLevel: 'Public'\n      }, function(res) {\n      });\n    },\n\n    saveFoto(data) {  // save foto to base and renew user info\n      const that = this;\n      API.uploadImage(data, (res) => {\n        console.log('save file', res);\n        API.checkUploadImage([res], (res) => {\n          that.foto_status = res[0].downloadUrl;\n          that.saveAllData();\n        });\n      });\n    },\n\n    findUser() { //find active user in user_list\n      let result = false;\n      this.user_list.forEach((item, i) => {\n        if (item.id === this.user.personId) {\n          result = i;\n        }\n      });\n      return result;\n    }\n\n  }\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/main.js"],"sourceRoot":""}