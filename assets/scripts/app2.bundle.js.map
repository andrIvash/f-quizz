{"version":3,"sources":["webpack:///assets/scripts/app2.bundle.js","webpack:///./scripts/main2.js","webpack:///./scripts/components/teacher.js"],"names":["webpackJsonp","13","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","$","__WEBPACK_IMPORTED_MODULE_0__node_modules_jquery_modal_jquery_modal_js__","__WEBPACK_IMPORTED_MODULE_1__api__","n","__WEBPACK_IMPORTED_MODULE_2__cookie__","__WEBPACK_IMPORTED_MODULE_3__auth__","__WEBPACK_IMPORTED_MODULE_4_vee_validate__","__WEBPACK_IMPORTED_MODULE_5_vee_validate_dist_locale_ru__","__WEBPACK_IMPORTED_MODULE_5_vee_validate_dist_locale_ru___default","__WEBPACK_IMPORTED_MODULE_7__components_teacher__","dictionary","ru","messages","confirmed","email","required","numeric","alpha_dash","alpha_spaces","addLocale","a","configValidate","locale","Validator","updateDictionary","Vue","use","config","debug","el","data","eduShow","user_type","user","components","teacherComponent","mounted","init","get","token","this","startApp","document","location","search","indexOf","auth","methods","_this","that","getUserInfo","then","res","loading","roles","getData","isEdu","find","role","clearView","text","showModal","modal","fadeDuration","fadeDelay","sendData","console","log","ajax","url","method","username","index","address","phone","school_number","albums","personal_data","dataType","done","saveAllData","_this2","userList","forEach","elem","id","personId","summ","info","addKeyToDB","label","key","JSON","stringify","permissionLevel","article","call","14","template","props","on","errors","clear","validateBeforeSubmit","$validator","validateAll","result","$emit","buyThis","16","exports"],"mappings":"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","file":"assets/scripts/app2.bundle.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 13:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__node_modules_jquery_modal_jquery_modal_js__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__node_modules_jquery_modal_jquery_modal_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__node_modules_jquery_modal_jquery_modal_js__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__api__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cookie__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__auth__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vee_validate__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_vee_validate_dist_locale_ru__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_vee_validate_dist_locale_ru___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_vee_validate_dist_locale_ru__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__components_start__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__components_teacher__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__components_game__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__components_foto__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__components_final__ = __webpack_require__(4);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar dictionary = {\n  ru: {\n    messages: {\n      confirmed: function confirmed() {\n        return \"Your password is not confirmed\";\n      },\n      email: function email() {\n        return \"I really dont like your email\";\n      },\n      required: function required() {\n        return \"Это обязательное поле\";\n      },\n      numeric: function numeric() {\n        return \"Введите цифровое значение\";\n      },\n\n      alpha_dash: function alpha_dash() {\n        return \"Введите  текстовое значение\";\n      },\n\n      alpha_spaces: function alpha_spaces() {\n        return \"Введите  текстовое значение\";\n      }\n\n    }\n  }\n};\n\n__WEBPACK_IMPORTED_MODULE_4_vee_validate__[\"a\" /* Validator */].addLocale(__WEBPACK_IMPORTED_MODULE_5_vee_validate_dist_locale_ru___default.a);\n\nvar configValidate = {\n  locale: 'ru'\n};\n\n__WEBPACK_IMPORTED_MODULE_4_vee_validate__[\"b\" /* default */].Validator.updateDictionary(dictionary);\nVue.use(__WEBPACK_IMPORTED_MODULE_4_vee_validate__[\"b\" /* default */], configValidate);\nVue.config.debug = true;\n\nvar _vmt = new Vue({\n  el: '#app-teacher',\n  data: {\n    eduShow: false,\n    user_type: null, // user type\n    user: null\n  },\n\n  components: {\n    teacherComponent: __WEBPACK_IMPORTED_MODULE_7__components_teacher__[\"a\" /* default */]\n  },\n\n  mounted: function mounted() {\n    //console.log('Running App version ! ' + CDN);\n    var that = this;\n\n    __WEBPACK_IMPORTED_MODULE_1__api__[\"a\" /* API */].init();\n    if (void 0 !== __WEBPACK_IMPORTED_MODULE_2__cookie__[\"a\" /* Cookie */].get('token')) {\n      __WEBPACK_IMPORTED_MODULE_1__api__[\"a\" /* API */].token = __WEBPACK_IMPORTED_MODULE_2__cookie__[\"a\" /* Cookie */].get('token');\n      this.startApp();\n    } else if (document.location.search.indexOf('auth') === -1) {\n      __WEBPACK_IMPORTED_MODULE_3__auth__[\"a\" /* Auth */].auth();\n    }\n  },\n  methods: {\n    startApp: function startApp() {\n      var _this = this;\n\n      var that = this;\n      __WEBPACK_IMPORTED_MODULE_1__api__[\"a\" /* API */].getUserInfo().then(function (res) {\n        that.loading = true; // инициализация спиннера\n        var roles = __WEBPACK_IMPORTED_MODULE_1__api__[\"a\" /* API */].getData().user.roles;\n        that.user = res;\n        //console.log(that.user);\n        var isEdu = roles.find(function (role) {\n          return role === 'EduStaff';\n        });\n        _this.clearView();\n        if (!isEdu) {\n          // проверка на учителя\n          $('#modal2 .modal__content').text('Активность возможна только для преподавателей !');\n          _this.showModal();\n        } else {\n          that.eduShow = true;\n        }\n      });\n    },\n\n    showModal: function showModal() {\n      var modal = $('#modal2').modal({\n        fadeDuration: 250,\n        fadeDelay: 1.5\n      });\n    },\n    sendData: function sendData(data) {\n      var that = this;\n      console.log('send data');\n      $.ajax({\n        url: 'https://formspree.io/ebelopukhova@paninirus.com',\n        method: 'POST',\n        data: {\n          username: data.username,\n          index: data.index,\n          address: data.address,\n          phone: data.phone,\n          school_number: data.school_number,\n          albums: data.albums,\n          personal_data: data.personal_data\n        },\n        dataType: 'json'\n      }).done(function () {\n        $('#modal2 .modal__content').text('Спасибо, ваша заявка принята.');\n        that.showModal();\n      });\n    },\n    clearView: function clearView() {\n      this.eduShow = false;\n    },\n    saveAllData: function saveAllData() {\n      var _this2 = this;\n\n      var that = this;\n      // user list update\n      this.userList.forEach(function (elem) {\n        if (elem.id === _this2.user.personId) {\n          elem.summ = _this2.info.summ;\n        }\n      });\n\n      __WEBPACK_IMPORTED_MODULE_1__api__[\"a\" /* API */].addKeyToDB({\n        label: 'raff',\n        key: 'raff_activity-' + this.user.personId,\n        value: JSON.stringify(this.info),\n        permissionLevel: 'Public'\n      }, function (res) {\n        __WEBPACK_IMPORTED_MODULE_1__api__[\"a\" /* API */].addKeyToDB({\n          key: 'raff_activity-articles-' + that.article.id,\n          value: JSON.stringify(that.article),\n          permissionLevel: 'Public'\n        }, function (res) {\n          __WEBPACK_IMPORTED_MODULE_1__api__[\"a\" /* API */].addKeyToDB({\n            key: 'raff_activity-userList',\n            value: JSON.stringify(that.userList),\n            permissionLevel: 'Public'\n          }, function (res) {});\n        });\n      });\n    }\n  }\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(0)))\n\n/***/ }),\n\n/***/ 14:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  template: '#teacher-template',\n\n  props: ['isShown'],\n\n  data: function data() {\n    return {\n      address: '',\n      username: '',\n      index: null,\n      phone: '',\n      school_number: null,\n      albums: 150,\n      personal_data: false\n    };\n  },\n\n  mounted: function mounted() {\n\n    var that = this;\n    $('.tform__input').on('focus', function () {\n      that.errors.clear();\n    });\n  },\n\n  methods: {\n    validateBeforeSubmit: function validateBeforeSubmit() {\n      var _this = this;\n\n      var that = this;\n      this.$validator.validateAll().then(function (result) {\n        if (result) {\n          _this.$emit('send', {\n            username: that.username,\n            index: that.index,\n            address: that.address,\n            phone: that.phone,\n            school_number: that.school_number,\n            albums: that.albums,\n            personal_data: that.personal_data\n          });\n          return;\n        }\n        $('#modal2 .modal__content').text('Форма содержит неверные данные !');\n        _this.showModal();\n      });\n    },\n\n    showModal: function showModal() {\n      var modal = $('#modal2').modal({\n        fadeDuration: 250,\n        fadeDelay: 1.5\n      });\n    },\n    buyThis: function buyThis() {\n      var modal = $('#modal').modal({\n        fadeDuration: 250,\n        fadeDelay: 1.5\n      });\n    }\n  }\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(0)))\n\n/***/ }),\n\n/***/ 16:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(13);\n\n\n/***/ })\n\n},[16]);\n\n\n// WEBPACK FOOTER //\n// assets/scripts/app2.bundle.js","import '../../node_modules/jquery-modal/jquery.modal.js';\nimport { API } from './api';\nimport { Cookie } from './cookie';\nimport { Auth } from './auth';\n\n\nimport VeeValidate, { Validator } from 'vee-validate';\nimport ru from 'vee-validate/dist/locale/ru';\n\nimport StartComponent from './components/start';\nimport TeacherComponent from './components/teacher';\nimport GameComponent from './components/game';\nimport FotoComponent from './components/foto';\nimport FinalComponent from './components/final';\n\nconst dictionary = {\n  ru: {\n    messages: {\n      confirmed: function () { \n        return \"Your password is not confirmed\"\n      },\n      email: function () { \n        return \"I really dont like your email\"\n      },\n      required: function () { \n        return \"Это обязательное поле\"\n      },\n      numeric: function () { \n        return \"Введите цифровое значение\"\n      },\n\n      alpha_dash: function () { \n        return \"Введите  текстовое значение\"\n      },\n\n      alpha_spaces: function () { \n        return \"Введите  текстовое значение\"\n      }\n\n    }\n  }\n};\n\nValidator.addLocale(ru);\n\n\nconst configValidate = {\n  locale: 'ru'\n};\n\nVeeValidate.Validator.updateDictionary(dictionary);\nVue.use(VeeValidate, configValidate);\nVue.config.debug = true;\n\n\nconst _vmt = new Vue({\n  el: '#app-teacher',\n  data: {\n    eduShow: false,\n    user_type: null, // user type\n    user: null\n  },\n\n  components: {\n    teacherComponent: TeacherComponent\n  },\n\n  mounted: function() {\n    //console.log('Running App version ! ' + CDN);\n    const that = this;\n\n    API.init();\n    if (void 0 !== Cookie.get('token')) {\n      API.token = Cookie.get('token');\n      this.startApp();\n    } else if (document.location.search.indexOf('auth') === -1) {\n      Auth.auth();\n      \n    }\n\n  },\n  methods: {\n    startApp() {\n      const that = this;\n      API.getUserInfo().then((res) => {\n        that.loading = true; // инициализация спиннера\n        const roles = API.getData().user.roles;\n        that.user = res;\n        //console.log(that.user);\n        const isEdu = roles.find(role => {\n          return role === 'EduStaff';\n        });\n        this.clearView();\n        if (!isEdu) { // проверка на учителя\n          $('#modal2 .modal__content').text('Активность возможна только для преподавателей !');\n          this.showModal();\n        } else {\n          that.eduShow = true;\n        }\n      });\n    },\n    showModal: function() {\n      const modal = $('#modal2').modal({\n        fadeDuration: 250,\n        fadeDelay: 1.5\n      });\n    },\n    sendData(data) {\n      const that = this;\n      console.log('send data');\n      $.ajax({\n        url: 'https://formspree.io/ebelopukhova@paninirus.com',\n        method: 'POST',\n        data: {\n          username: data.username,\n          index: data.index,\n          address: data.address,\n          phone: data.phone,\n          school_number: data.school_number,\n          albums: data.albums,\n          personal_data: data.personal_data\n        },\n        dataType: 'json'\n      }).done(function() {\n        $('#modal2 .modal__content').text('Спасибо, ваша заявка принята.');\n        that.showModal();\n      });\n    },\n    clearView() {\n      this.eduShow = false;\n    },\n    saveAllData() {\n      const that = this;\n      // user list update\n      this.userList.forEach((elem) => {\n        if (elem.id === this.user.personId) {\n          elem.summ = this.info.summ;\n        }\n      });\n\n      API.addKeyToDB({\n        label: 'raff',\n        key: `raff_activity-${this.user.personId}`,\n        value: JSON.stringify(this.info),\n        permissionLevel: 'Public'\n      }, function(res) {\n        API.addKeyToDB({\n          key: `raff_activity-articles-${that.article.id}`,\n          value: JSON.stringify(that.article),\n          permissionLevel: 'Public'\n        }, function(res) {\n          API.addKeyToDB({\n            key: 'raff_activity-userList',\n            value: JSON.stringify(that.userList),\n            permissionLevel: 'Public'\n          }, function(res) {\n\n          });\n        });\n      });\n    }\n  }\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/main2.js","export default {\n  template: '#teacher-template',\n\n  props: ['isShown'],\n\n  data: () => ({\n    address: '',\n    username: '',\n    index: null,\n    phone: '',\n    school_number: null,\n    albums: 150,\n    personal_data: false\n  }),\n\n  mounted: function() {\n    \n    const that = this;\n    $('.tform__input').on('focus', () => {\n      that.errors.clear();\n    });\n  },\n\n  methods: {\n    validateBeforeSubmit() {\n      const that = this;\n      this.$validator.validateAll().then((result) => {\n        if (result) {\n          this.$emit('send', {\n            username: that.username,\n            index: that.index,\n            address: that.address,\n            phone: that.phone,\n            school_number: that.school_number,\n            albums: that.albums,\n            personal_data: that.personal_data\n          });\n          return;\n        }\n        $('#modal2 .modal__content').text('Форма содержит неверные данные !');\n        this.showModal();\n      });\n    },\n    showModal: function() {\n      const modal = $('#modal2').modal({\n        fadeDuration: 250,\n        fadeDelay: 1.5\n      });\n    },\n    buyThis: function() {\n      const modal = $('#modal').modal({\n        fadeDuration: 250,\n        fadeDelay: 1.5\n      });\n    }\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/components/teacher.js"],"sourceRoot":""}